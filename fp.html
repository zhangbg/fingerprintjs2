







<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=yes"/>
    <title>Am I unique?</title>

    <!-- Custom Fonts and Icons -->
    <link rel="stylesheet" type="text/css" href="/assets/font-awesome/css/font-awesome.min.css" >
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/lato/latoFonts.css">
    <!-- Bootstrap core CSS  (Bootswatch Flatly Theme) -->
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/bootstrap.min.css">
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/sb-admin.css">

    <!-- Jquery/Bootstrap JS -->
    <script type="text/javascript" src="/assets/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/javascripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/javascripts/cookies.js"></script>
    <script type="text/javascript" src="/assets/javascripts/returningVisitor.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- JS Fix for IE8 display bugs -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="/assets/javascripts/html5shiv.min.js"></script>
      <script type="text/javascript" src="/assets/javascripts/respond.min.js"></script>
      <script type="text/javascript" src="/assets/javascripts/IECSSFix.js"></script>
    <![endif]-->

    

    <!-- Div for canvas -->
    <div style="display: none ;">
        <canvas id="canvas1" height="30" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas2" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas3" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas4" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas5" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas6" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas7" height="400" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas8" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas9" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas10" height="80" width="80" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas11" height="200" width="200" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas12" height="200" width="200" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas13" height="200" width="200" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas14" height="275" width="450" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas15" height="500" width="500" style="border:1px solid #d3d3d3"></canvas>
        <br>
        <canvas id="canvas16" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas17" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
		<canvas id="canvas18" height="60" width="400" style="border:1px solid #d3d3d3"></canvas>
		<br>
    </div>

    <script type="text/javascript" src="/assets/javascripts/spin.min.js"></script>
    <script type="text/javascript" src="/assets/javascripts/canvas.js"></script>

    <script type="text/javascript" src="/assets/javascripts/swfobject.js"></script>
    <script type="text/javascript" src="/assets/javascripts/PluginDetect_All.js"></script>

    <script type="text/javascript" src="/assets/js/routes" ></script>
    <script type="text/javascript" src="/assets/javascripts/webGL.js"></script>
    <script type="text/javascript" src="/assets/javascripts/highcharts.js"></script>
    <script type="text/javascript" src="/assets/javascripts/advert.js"></script>
    <script type="text/javascript" src="/assets/javascripts/fp.js"></script>

    <script type="text/javascript" src="/assets/javascripts/canvasTest.js"></script>

    <script type="text/javascript">
        swfobject.embedSWF("/assets/flash/OSData.swf", "OSData", "0", "0", "9.0.0");
    </script>

    <script type="application/javascript">
        function isConnected(){
            flashAvailable = true;
        }
    </script>

    <script type="text/javascript">
        $(document).ready(function(){
            var target = document.getElementById('content');
            var spinner = new Spinner({length: 20, width: 10, radius: 30, color: '#FFF'}).spin(target);

            if(readCookie('tempFp') != null && readCookie('tempPerc') != null && domLocalStorage == "yes"){
                spinner.stop();

                res = localStorage.getItem("tempFpContent");
                $('#content').html(res);


                var tempPerc = readCookie('tempPerc');
                per = JSON.parse(tempPerc);

                $("#progress").remove();
                //We add every percentages to the main page
                for(var k in per) {
                    if(k != 'perPluginsJs'){
                        var percentage = per[k];
                        var cell = document.getElementById(k+"Per");
                        if(percentage == -1) {
                            cell.textContent = "Unique";
                        } else if(percentage >= 0.1){
                            cell.textContent = percentage.toFixed(2)+"%";
                        } else {
                            cell.textContent = "<0.1%";
                        }
                    }else{
                        //Details of percentages for plugins
                        var cpt = 0;
                        for(var t in per[k]){
                            $('<tr><td></td><td>'+per[k][t].toFixed(2)+' % </td><td>'+t+'</td></tr>').insertAfter('#pluginsJs');
                            cpt++;
                        }

                        if(cpt > 0){
                            $('<tr><td style="font-weight:bold;" colspan="3">Detail of the plugins</td></tr>').insertAfter('#pluginsJs');
                            $('<tr><td colspan="3"></td></tr>').insertAfter('#pluginsJs');
                            $('<tr><td colspan="3"></td></tr>').insertBefore('#platformJs');
                        }
                    }
                }               

                if(canvasData.indexOf("Not supported") == -1) {
                    //Display of canvas objects
                    document.getElementById ("canvasJsVal").innerHTML = '<canvas id="canvas1" height="60" width="400"></canvas>' ;
                    var canContext = document.getElementById ("canvas1").getContext("2d");
                    var canImage = new Image();
                    canImage.onload = function(){
                        canContext.drawImage(this, 0, 0);
                    };
                        canImage.src = canvasData;
                    }

                    $("#graphs" ).show();

            }
            else{

                function sendData(){
                    var fontsFlash,resolutionFlash,languageFlash,platformFlash;
                    if((plugins.indexOf("flash") > -1) || (plugins.indexOf("Flash") > -1)){
                        var fl = document.getElementById("OSData");
                        if(fl == null){
                            fontsFlash = resolutionFlash = languageFlash = platformFlash = "Flash detected but blocked by an extension";
                        } else if((typeof fl.getOS != "undefined") || (typeof flashAvailable == "boolean")) {
                            fontsFlash = fl.getFonts().join().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g, '_');
                            resolutionFlash = fl.getResolution().join("x");
                            languageFlash = fl.getLanguage();
                            platformFlash = fl.getOS();
                        } else {
                            fontsFlash = resolutionFlash = languageFlash = platformFlash = "Flash detected but not activated (click-to-play)";
                        }
                    } else {
                        fontsFlash = resolutionFlash = languageFlash = platformFlash = "Flash not detected";
                    }

                    jsRoutes.controllers.FPController.addFingerprint().ajax({
                        data: JSON.stringify({
                            userAgentHttp: 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.82 Safari/537.36',
                            acceptHttp: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8', hostHttp: 'amiunique-backend',
                            connectionHttp: 'close', encodingHttp: 'gzip, deflate, sdch',
                            languageHttp: 'en-US,en;q=0.8', orderHttp: 'Upgrade-Insecure-Requests Referer Connection Accept Cache-Control Pragma X-Real-IP Accept-Language Accept-Encoding User-Agent Host',
                            pluginsJs: plugins.replace(/[&\/\\#,+()$~%'"*?<>{}]/g,''), platformJs: platform, cookiesJs: cookieEnabled, dntJs: doNotTrack,
                            timezoneJs: timezone, resolutionJs: resolution, localJs: domLocalStorage, sessionJs: domSessionStorage, IEDataJs: ieUserData,
                            canvasJs: canvasData, fontsFlash: fontsFlash, webGLJs: webGLData, vendorWebGLJs: webGLVendor,rendererWebGLJs: webGLRenderer,
                            resolutionFlash: resolutionFlash,languageFlash: languageFlash,platformFlash: platformFlash,
                            adBlock: document.getElementById('ads')? 'no' : 'yes', canvas1:canvasData1, canvas2:canvasData2,
                            canvas3:canvasData3, canvas4:canvasData4, canvas5:canvasData5, canvas6:canvasData6, canvas7:canvasData7,
                            canvas8:canvasData8, canvas9:canvasData9, canvas10:canvasData10, canvas11:canvasData11, canvas12:canvasData12,
                            canvas13:canvasData13, canvas14:canvasData14, canvas15:canvasData15, canvas16:canvasData16, canvas17:canvasData17,
                            canvas18:canvasData18
                        }),
                        contentType:"application/json",
                        success: function(res){
                            
                            spinner.stop();
                            /* We define a temporary cookie that lasts 3 min so that we don't calculate the fingerprint again
                            if the user comes back during these 3 min */ 
                            createCookie('tempFp', 1, 0.002083333);

                            if(domLocalStorage == "yes"){
                                localStorage.setItem("tempFpContent", res);
                            }

                            $('#content').html(res);

                            jsRoutes.controllers.StatsController.percentages().ajax({
                                data: document.getElementById("counter").innerHTML,
                                contentType:"text/plain",
                                success: function(per) {
                                    /* We define a temporary cookie that lasts 3 min so that we don't calculate the percentage again
                                    if the user comes back during these 3 min */ 
                                    createCookie('tempPerc', JSON.stringify(per), 0.002083333);
    
                                    //We remove the "In progress" banner
                                    $("#progress").remove();
                                    //We add every percentages to the main page
                                    for(var k in per) {
                                        if(k != 'perPluginsJs'){
                                            var percentage = per[k];
                                            var cell = document.getElementById(k+"Per");
                                            if(percentage == -1) {
                                                cell.textContent = "Unique";
                                            } else if(percentage >= 0.1){
                                                cell.textContent = percentage.toFixed(2)+"%";
                                            } else {
                                                cell.textContent = "<0.1%";
                                            }
                                        }else{
                                            var cpt = 0;
                                            for(var t in per[k]){
                                                $('<tr><td></td><td>'+per[k][t].toFixed(2)+' % </td><td>'+t+'</td></tr>').insertAfter('#pluginsJs');
                                                cpt++;
                                            }

                                            if(cpt > 0){
                                                $('<tr><td style="font-weight:bold;" colspan="3">Detail of the plugins</td></tr>').insertAfter('#pluginsJs');
                                                $('<tr><td colspan="3"></td></tr>').insertAfter('#pluginsJs');
                                                $('<tr><td colspan="3"></td></tr>').insertBefore('#platformJs');
                                            }
                                        }
                                    }
                                },
                                error: function(jqXHR, textStatus, errorThrown) {
                                    console.log(textStatus,errorThrown);
                                }
                            });
                            

                            if(canvasData.indexOf("Not supported") == -1) {
                                //Display of canvas objects
                                document.getElementById ("canvasJsVal").innerHTML = '<canvas id="canvasImg" height="60" width="400"></canvas>' ;
                                var canContext = document.getElementById ("canvasImg").getContext("2d");
                                var canImage = new Image();
                                canImage.onload = function(){
                                    canContext.drawImage(this, 0, 0);
                                };
                                canImage.src = canvasData;
                            }

                            $("#graphs" ).show();
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            console.log(textStatus,errorThrown);
                        }
                    });
                }

                setTimeout(sendData,1000);

            }

            //Script to force the fingerprinting
            if(readCookie('tempFp') != null){
                setTimeout(function() {
                    language = $('#languageHttpVal').text();
                    language = language.split(";");

                    $('<a id="forceFp" class="btn btn-warning btn-lg" role="button">Force fingerprinting</a>').insertAfter("#graBut");

                    $('#forceFp').css('margin-left','3px');

                    $( "#forceFp" ).mouseover(function() {
                        $('<p id="infoforcefp"><br/>We use a temporary cookie of 3 minutes in order to keep your fingerprint and load it faster. If you have made change and would like to see them, click on Force Fingerprinting.</p>').insertAfter("#forceFp");

                        $('#infoforcefp').css('font-weight','bold');
                        $('#infoforcefp').css('color','#149c82');
                    });

                    $( "#forceFp" ).mouseleave(function() {
                      $('#infoforcefp').remove();
                    });

                    $("#forceFp").click(function(){
                        createCookie('tempFp', 1, -1);
                        createCookie('tempPerc', 1, -1);
                        if(domLocalStorage == "yes"){
                            localStorage.setItem("tempFpContent", "");
                        }

                        location.reload();
                    });

                }, 500);
            }
        });
    </script>


</head>
<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Am I Unique?</a>
            </div>

            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                    <li >
                        <a style="color:#ffffff" href="/"><i class="fa fa-fw fa-home"></i>&nbsp; Home</a>
                    </li>
                    <li class='active'>
                        <a style="color:#ffffff" id="menuLink" href="/fpNoJs"><i class="fa fa-fw fa-paw"></i>&nbsp; My fingerprint</a>
                    </li>
                    
                    <li >
                        <a style="color:#ffffff" id="menuTimeline" href="/timeline"><i class="fa fa-fw fa-clock-o"></i>&nbsp; My timeline</a>
                    </li>
                    <li >
                        <a style="color:#ffffff" href="/stats"><i class="fa fa-fw fa-pie-chart"></i>&nbsp;  Global statistics</a>
                    </li>
                    <li >
                        <a style="color:#ffffff" href="/faq"><i class="fa fa-fw fa-question"></i>&nbsp; FAQ</a>
                    </li>
                    <li >
                        <a style="color:#ffffff" href="/privacy"><i class="fa fa-fw fa-shield"></i>&nbsp; Privacy policy</a>
                    </li>
                    <li >
                        <a style="color:#ffffff" href="/tools"><i class="fa fa-fw fa-cogs"></i>&nbsp; Privacy tools</a>
                    </li>

                    <li >
                        <a style="color:#ffffff" href="/links"><i class="fa fa-fw fa-link"></i>&nbsp; Links</a>
                    </li>
                    <li >
                        <a style="color:#ffffff" href="/about"><i class="fa fa-fw fa-circle-o"></i>&nbsp; About</a>
                    </li>
                    <li>
                        <a style="color:#ffffff" href="https://github.com/DIVERSIFY-project/amiunique" target="GitHub"><i class="fa fa-fw fa-github-alt"></i>&nbsp; View on GitHub</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

        <div id="page-wrapper">
            <div class="container-fluid">
                <div class="col-lg-8 col-lg-offset-2">
                    
    <div id="content">
    </div>
    
    <!-- Div for the Flash file -->
    <div id="OSData"></div>

                </div>
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- code for the modal window -->
    <a style="display:none;" id="returningvis" href="#" data-toggle="modal" data-target="#basicModal"></a>

    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">You are back</h4>
                </div>
                <div class="modal-body">
                    <p>
                        You can go on the <a href="/fp">My fingerprint</a> page to get your new fingerprint, then on the page <a href="/history">My history</a> to visualize the evolution of your fingerprint since your last visit.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <a href="/fp"><button type="button" class="btn btn-primary">Get your new fingerprint</button></a>
            </div>
        </div>
      </div>
    </div>

    


    <script type="text/javascript">
        document.getElementById("menuLink").href = "/fp";
    </script>

</body>
</html>